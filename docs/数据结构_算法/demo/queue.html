<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>queue</title>
</head>

<body>
    queue
    <script>
        function Queue() {
            this.dataStore = [];
            this.enqueue = enqueue;  // 队尾添加一个元素
            this.dequeue = dequeue; // 删除队首元素。
            this.front = front; // 返回队首的元素。
            this.back = back; //  返回队尾的元素。
            this.toString = toString; // 显示队列中的所有元素。
            this.empty = empty; // 判断队列是否为空。
        }
        function enqueue(el) {
            return this.dataStore.push(el)
        }
        function dequeue() {
            return this.dataStore.shift()
        }
        function front() {
            return this.dataStore[0]
        }
        function back() {
            return this.dataStore[this.dataStore.length - 1]
        }
        function toString() {
            var reStr = ''
            for (var i = 0; i < this.dataStore.length; i++) {
                reStr += this.dataStore[i] + '\n'
            }
            return reStr
        }
        function empty() {
            return this.dataStore.length === 0
        }

        var q = new Queue()
        q.enqueue('qiphon')
        q.enqueue('zhijia')
        q.enqueue('banban')
        q.enqueue('laowang')

        console.log(q.toString())

        q.dequeue()
        console.info(q.toString())


        // 优先队列
        function QueueByCode(name, code) {
            this.name = name;
            this.code = code;
        }
        function Queue2() {
        }
        Queue2.prototype = Object.create(new Queue(), {
            constructor: {
                value: Queue2
            },
            toString: {
                value: function toString() {
                    var reStr = ''
                    for (var i = 0; i < this.dataStore.length; i++) {
                        reStr += JSON.stringify(this.dataStore[i]) + '\n'
                    }
                    return reStr
                }
            },
            dequeue: {
                value: function(){
                    var key = 0;
                    for (var i = 0; i < this.dataStore.length; i++) {
                        if (this.dataStore[i].code > this.dataStore[key].code) {
                            key = i
                        }
                    }
                    return this.dataStore.splice(key, 1)[0]
                } 
            }
        })

        var q2 = new Queue2()
        console.log(q2)
        q2.enqueue(new QueueByCode('qiphon', 1))
        q2.enqueue(new QueueByCode('laowang', 2))
        q2.enqueue(new QueueByCode('banban', 3))
        q2.enqueue(new QueueByCode('laoyuan', 4))

        console.log('第一个人是', q2.dequeue())
        console.log(q2.toString())
    </script>
</body>

</html>