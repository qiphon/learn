# linux 入门

1. Linux 根目录结构说明

![linux 目录结构](../imgs/Linux-root-tree.png)

|  目录   |   解释   |
|--|--|--|
bin      |  存放二进制可执行文件（ls, cat, mkdir等），常用命令一般都在这里
sbin     |  存放二进制可执行文件，只有root 才能访问。这里存放的是系统管理员使用的系统级别的 管理命令和 程序，如 ifconfig等
boot     |  用于存放系统引导时使用的各种文件
dev      |  用于存放设备文件 （如鼠标，键盘等）
media    |  同dev相似，存放外部设备的目录（可读型的，如u盘等）
etc      |  存放系统管理和配置文件
home     |  存放所有用户文件的根目录，是用户主目录的基点，比如用户user的主目录就是 /home/user, 可以用 ~user 表示
root     |  超级管理员目录
lib      |  存放跟文件系统中的程序运行所需要的共享库及内核模块。共享库又叫动态链接共享库，作用类似 Windows 下的 .dll 文件，存放了根文件系统程序运行所需的共享文件
lib64    |  大量以 .so 结尾的动态库
mnt      |  系统管理员安装临时文件系统的安装点，系统提供这个目录是让用户临时挂载其他文件系统
opt      |  额外安装的可选应用程序包所存放的位置。一般情况下，我们可以把 Tomcat 等都安装到这里
proc     |  虚拟文件系统目录，是系统内存的映射。可以直接访问这个目录来获取系统信息
run      |  。。。
tmp      |  用于存放各种临时文件，是公用的临时文件存储点
var      |  用于存放运行时需要改变数据的文件，也是某些大文件的溢出区，比如各种服务的日志文件（系统启动日志）等
lost+found| 这个目录平时是空的，系统非正常关机而留下的 ”无家可归“ 的文件 。（Windows 下叫 XXX.chk）
usr      |  用于存放系统应用程序，这是最庞大的目录，要用到的应用程序和文件几乎都是在这个目录。
usr/local|  本地系统管理员软件安装目录（安装系统级的应用）。
usr/x11r6|  存放 x window 的目录
usr/bin  |  众多的应用程序
usr/sbin |  root用户的一些管理程序
usr/doc  |  linux 文档
usr/include|  linux 下开发和编译应用程序所需要的头文件
usr/lib  |  动态链接库和软件包的配置文件
usr/man  |  帮助文档
usr/src  |  源代码，Linux内核的源代码就放在 /usr/src/linux 里
usr/local/bin | 本地增加的命令
usr/local/lib |  本地增加的库

## 区分登录用户是否是root

```
// 如果登录用户是 root
[root@localhost ~]#

```
- root  当前登录的用户  

- localhost  主机名

- ~当前工作目录，默认是用户的家目录， root就是 /root, 普通用户是 /home/用户名

- 提示符 root 是  #  ，普通用户是  $

### 命令格式

- 命令 【选项】 【参数】

- 例子  ``` ls -al ```

- 当有多个选项时，可以写在一起，如  -al 是 -a 和 -l 的缩写

## linux 基本命令

> linux 只有一个盘符（cd / ,即可以切换的系统的跟目录。 cd ~  ,会切换到用户的目录位置），

- tab 键可以补全命令和目录

#### ls & dir  目录命令

> ls 和 dir都能显示当前目录的下含有的文件或目录，但是ls命令中文件夹显示一般是蓝色的，dir则全部都是一个颜色，另外ls还拥有额外的扩展命令

```sh

ls -l  # 展示目录的详细信息

ls -a  # 查看所有的文件 （包括隐藏文件）

ls -d  # 查看目录本身的属性而非子文件

ls -k  # 人性化的方式显示文件的大小

ls -i  # 显示inode，也就是 i节点，每个文件独有的ID号

```
ls -l 显示详细信息

```  drwxr-xr-x.  21 root root  4096  9月 12 03:26 var  ```

drwxr-xr-x | .  |  21  |   root   |  root  |  9月 12 03:26  | var
--|--|--|--|--|--|--|
文件类型和权限| ACL权限 | 硬链接引用计数| 所有者 | 所属组 | 最后修改时间 | 文件名

#### 文件类型和权限

```  drwxr-xr-x  ```

- 文件类型 :  文件 - ， 目录  d ，软链接  l

- u （所有者）， g （所属组）， o （其他人）

- r （read）读取 对应值4， w （write）写 对应值 2， x （execute） 执行 对应值 1

```

// 输入 ls -l 命令就会看到这的一个列表

drwx------  6 qifeng  staff   192B  4 22 13:50 Documents
drwx------ 14 qifeng  staff   448B  8  7 15:19 Downloads
drwx------ 75 qifeng  staff   2.3K  8  2 10:34 Library
drwx------  4 qifeng  staff   128B  8  7 15:32 Movies
drwx------  4 qifeng  staff   128B  4 30 10:25 Music
drwx------  3 qifeng  staff    96B  4 19 10:54 Pictures


第一位 的d 代表是目录
        l 表示链接
        - 表示是文件

后面的9位是 文件的权限，rwx （r 可读 用4表示，w 可写 用2表示， x 可执行 用1表示） ，分为3组（分别是用户，用户组，其他人 的权限）


```

### 文件处理命令

#### mkdir  创建文件夹

```
-p  // 如果文件不存在则创建，不会报错

-m  // 添加目录权限

-v  // 显示命令状态  成功失败等

```

#### touch  新建文件

####  rmdir 删除文件夹（只能删除空的文件夹）

#### mv 移动文件

#### rm 删除文件/文件夹  

>（rm -rf *   删除该目录下所有文件）

```
-r  删除目录

-f  强制删除

```

####  ln 创建链接

> ln -s 目标文件 要创建的软连接地址     --》 在指定位置创建一个软链接

软链接 | 硬链接
--|--|
lrwxrwxrwx. | -rw-rw-r--.
权限都是 777 | 权限和源文件一样
和源文件有不同iNode和block块（但是数据块中只保存源文件名和源文件节点号）  |  和源文件有相同 iNode和存储block块
可以对目录使用 | 不能对目录使用
删除源文件链接不能使用  | 删除源文件可以继续使用

> 没有 -s 的时候，创建的链接是硬链接。硬链接可以通过iNode 访问，不能跨分区，不能针对目录使用，使用的情况很少

#### cat 打开指定的文件

#### pwd 查看当前的目录

#### cp  复制命令

cp 【原文件或目录】 【目标文件或目录】

> 复制到目标位置的时候可以用另一个名字

```
-r   // 复制目录，默认是复制文件

-p   // 连带文件属性复制

-d   // 若源文件是链接文件，则复制链接属性

-a   // 相当于 -rpd

```

### 搜索命令

#### locate

- 在后台数据库中按文件名搜索， 速度比较快

- 数据存储在 /var/lib/mlocate 后台数据库，每天更新一次

- 可以使用 updatedb 命令立刻更新数据库

- 只能搜索文件名

```
-e  将排除在寻找的范围之外。
-1  如果是1．则启动安全模式。在安全模式下，使用者只能看到权限范围内的档案。这会使速度减慢，因为locate必须从实际的档案系统中取得档案的权限资料。
-f  将特定的档案系统排除在外，例如我们没有道理要把proc档案系统中的档案放在资料库中。
-q  安静模式，不会显示任何错误讯息。
-n  最多显示n个输出。
-r  使用正规运算式做寻找的条件。
-o  指定资料库的名称。
-d  指定资料库的路径
-h  显示辅助讯息
-V  显示程式的版本讯息

```

```  /etc/updatedb.conf  ```

建立索引的配置文件

- PRUNE_BIND_MOUNTS = "yes" 全部生效，开启搜索限制

- PRUNEFS  不搜索的文件系统

- PRUNENAMES  忽略的文件类型

- PRUNEPATHS  忽略的路径

#### find 文件搜索（性能低）

find 【搜索范围】 【搜索条件】

##### 按名称搜索

- 避免大范围搜索，会非常耗系统资源

> find ~/qiphon -name aaa.log

##### 通配符

- find 是在系统当中搜索符合条件的文件名，如果需要匹配，使用通配符匹配，通配符是完全匹配

- 通配符

1.  ``` * ``` 匹配任意内容
2. ``` ?  ``` 匹配任意一个字符
3. ``` [] ``` 匹配任意括号内的字符

```sh

find . -name 'c[abc]'
find . -name 'c[abc]*'

```
##### -i 不区分大小写

```sh

find . -iname 'c[abc]'
find . -iname 'c[abc]*'

```

##### -user  按所有者搜索

```sh

find . -user qiphon

```

##### 按时间搜索

```sh

find /nginx/access.log -mtime +5

// atime   访问时间
// ctime   改变文件属性
// mtime   修改文件内容

// -5      5天内修改的文件
// 5       5天前这个时间修改的文件
// +5      5天前修改的文件

```

##### 按大小搜索

- k 小写， M 大写

参数 |  含义
--|--|
-8k |  小于8k
8k  |  等于 8k
+8k |  大于8M
-8M |  小于8M

> find . -size +8M

##### -inum  按iNode 查找

> find . -inum 123

##### 综合应用

1. 查找大于 10k 小于 20k 的文件

> find /tmp -size +10k -a -size -20k

```
-a  and 逻辑与，2个条件都满足

-o  or  逻辑或，2个条件满足一个就可以

```

> 有时一个文件名很复杂，不能正确敲出来（以至于不能删除），可以使用find和i节点共同完成

> ``` find . -inum 31531 -exec rm {} \; ```

#### whereis 搜索命令所在路径以及帮助文档的位置

whereis 命令名

> whereis ls

```
-b   // 只查找可执行文件

-m   // 只查找帮助文件

```

#### which 命令搜索

- 可以看到别名

- 能看到的都是外部安装的命令

- 无法查看shell 自带的命令

##### grep 在文件中匹配符合条件的字符串

> grep '10' ss

```
-i  // 忽略大小写

-v  // 排除指定字符串

find . -inum 312323 -exec grep -i 's' {} \;

```

- find命令，在系统中搜索符合条件的文件名，如果需要匹配使用通配符匹配，通配符是完全匹配
- grep 命令：在文件中搜索符合条件的字符串，如果需要匹配，使用正则表达式进行匹配，正则表达式是包含匹配

### 帮助命令

#### man 查看指定命令的帮助文档

##### 基本用法

> man ls

##### 关键字搜索

> man -k mkdi

##### shell 内部帮助

> whereis 

找到就是外部，找不到就是内部

> help cd

### 压缩与解压命令

> .zip  .gz  .bz2  .tar.gz  .tar.bz2

#### zip 格式

- 压缩文件 zip 压缩文件名 源文件

#### logout  注销用户

#### shutdown -h now 立刻关机

#### shutdown -r now (或者是 reboot) 立刻重启计算机


#### init 命令

> 0: 关机
1:单用户
2: 多用户没有网络服务
3: 多用户有网络服务
4: 系统未使用保留给用户
5: 图形界面
6: 系统重启

执行方式：  init 6    ——》这样就是重启系统

#### who am i   // 查看当前用户
