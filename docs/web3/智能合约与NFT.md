# 智能合约 与 NFT

以太坊通过建立终极的抽象基础层-内置有**图灵完备编程语言**的区块链，使得任何人都能够创建**合约**和**去中心化应用**，并在其中设立他们自由定义的**所有权规则**、**交易方式**和**状态转换函数**。

以太坊虚拟机（EVM）是以太坊中智能合约的运行环境。它不仅被沙箱封装起来，事实上它被**完全隔离**，也就是说运行在 EVM 内部的代码 **不能接触到网络、文件系统或者其他进程**。甚至智能合约与其它智能合约只有有限的接触

- 比特币：类似我们汇款加上一个备注信息
- 以太坊：运行程序

以太坊是像一个链表，通过向 EVM 中传入一个值，使这个链表不断产生新的节点

pow 共识机制：已知上一个节点的哈希、当前节点的信息 + 一个幸运数字（挖矿需要找到的内容），计算出当前节点的哈希（必须满足前 10 位都是 0）。

## 智能合约

链上某个节点保存的运算代码，一旦部署就不能再修改。当用户输入数据调用某个合约时，就会有一个新的节点被执行出来。

### 以太坊账户

包含 4 个部分：

- 随机数，用于确定每笔交易只能被处理一次的计数器，参与生成交易的 id
- 账户目前的以太币余额，以太币（Ether）是以太坊内部主要的加密燃料，用于支付交易费用。以太币最小的单位是 Wei， 最大单位为太，1 ether = 10^18 wei
- 账户的合约代码（如果有的话）
- 账户的存储（默认为空）

交易过程

```
                    交易包含的内容：
                    - 消息接收者地址
                    - 用于确认发送者的签名                                     矿工计算
外部      发送交易    - 要发送的以太币数量                                      -------------->   新的节点状态
账户   ----------->  - 可选的数据（合约的参数）
                    - GasLimit：用于限制合约最多执行多少次运算 （防止死循环）
                    - GasPrice：用于计算需要支付的费用 （对计算资源、存储资源、网络带宽的消耗都用 gas 支付）

```

##### 以太坊改进建议 EIP （Ethereum Improvement Proposal）

用户向以太坊核心团队提供建议，提议通过之后就变成 ERC

```
想法 --> 草案 --> 已接受 --> 最后召集（last call） --> 已接受 --> 终结 final
```

##### 以太网征求意见 ERC （Ethereum Request for Comments）

成为 ERC 之后就成了以太网的一个标准

- 代币标准合约 ERC20 (数字代表 github 上的编号)
- NFT 非同质化代币（ERC721、ERC1155）
- 半同质化代币（ERC3475、ERC3525）
