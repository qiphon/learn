# å‡½æ•°å¼ç¼–ç¨‹ æœ¯è¯­

- å‡½æ•°å¼ç¼–ç¨‹
    - æ€»æ˜¯æ¥å—ä¸€ä¸ªå‚æ•°
    - å¿…é¡»æœ‰è¿”å›å€¼
    - å‡½æ•°ä¾æ®æ¥æ”¶çš„å‚æ•°ï¼Œè€Œä¸æ˜¯å¤–éƒ¨ç¯å¢ƒè¿è¡Œ
    - å¯¹äºç»™å®šçš„è¾“å…¥åªä¼šæœ‰å”¯ä¸€çš„è¾“å‡º
    - ä¸æ˜¯ç”¨å‡½æ•°æ¥ç¼–ç¨‹ï¼ï¼ï¼ä¸»æ—¨ï¼šå°†å¤æ‚çš„å‡½æ•°åˆæˆç®€å•çš„å‡½æ•°ï¼Œå°½é‡å†™æˆä¸€ç³»åˆ—åµŒå¥—çš„å‡½æ•°è°ƒç”¨
    - é€šä¿—å†™æ³•`function x(){}`åŒºåˆ«å¼€å‡½æ•°å’Œæ–¹æ³•ï¼›å‡½æ•°ä¸èƒ½å½’å±æŸä¸ªå¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨
        ```js
            // å‡½æ•°å¼ç¼–ç¨‹
            function a(){}
            class {
                b(){

                }
            }

            // ä¸æ˜¯å‡½æ•°å¼ç¼–ç¨‹
            var a ={
                b(){}
            }
            b.c = function(){}
        ```
    - å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ã€‚ï¼ˆfirst classï¼‰
        - å¯ä»¥èµ‹å€¼ç»™å…¶ä»–å˜é‡
        - å¯ä»¥ä½œä¸ºå‚æ•°
        - æˆ–è€…ä½œä¸ºåˆ«çš„å‡½æ•°çš„è¿”å›å€¼
    - ä¸å¯æ”¹ï¼Œå˜é‡ã€‚
        - å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œå˜é‡è¢«å‡½æ•°ä»£æ›¿
        - å˜é‡ä»…ä»…ä»£è¡¨æŸä¸ªè¡¨è¾¾å¼
        - æ‰€æœ‰çš„å˜é‡åªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡
    - map å’Œ reduce æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•
- æ€»ç»“
    1. å‡½æ•°å¼â€œç¬¬ä¸€ç­‰å…¬æ°‘â€
    2. åªç”¨è¡¨è¾¾å¼ï¼Œä¸ç”¨â€œè¯­å¥â€ ï¼ˆæ²¡æœ‰if switchï¼‰
    3. æ²¡æœ‰â€œå‰¯ä½œç”¨â€ 
    4. ä¸ä¿®æ”¹çŠ¶æ€
    5. å¼•ç”¨é€æ˜ï¼ˆå‡½æ•°è¿è¡Œåªé å‚æ•°ï¼Œä¸”ç›¸åŒçš„è¾“å…¥æ€»æ˜¯å¾—åˆ°ç›¸åŒçš„è¾“å‡ºï¼‰
        ```js
        identity = i => { return i } 
        // è°ƒç”¨å‡½æ•° identity(1) å¯ä»¥ç›´æ¥è¢« 1 æ›¿æ¢æ‰ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºæ›¿æ¢æ¨¡å‹

        ```

## ä¸“ä¸šæœ¯è¯­

- çº¯å‡½æ•°

    - å‡½æ•°ä¸ä¾èµ–å¤–éƒ¨ç¯å¢ƒçš„çŠ¶æ€
    - ç›¸åŒçš„è¾“å…¥æ€»æ˜¯ç›¸åŒçš„è¾“å‡º
       ```js
       // è¿™ä¸ªå‡½æ•°ä¾èµ–äº†å¤–éƒ¨çš„ numï¼Œ æ‰€ä»¥ä¸æ˜¯å­˜å‡½æ•° 
        var num = 5;
        function a (b){
            return b> num
        }
        // å˜é‡åªèƒ½ä¼ å…¥è¿›å»
        function b(a, b){
            return a>bÃŸ
        }
       ```

- å¹‚ç­‰æ€§

æ‰§è¡Œè¿‡æ— æ•°æ¬¡åï¼Œè¿˜å…·æœ‰ç›¸åŒçš„æ•ˆæœ

åŒä¸€å‚æ•°ï¼Œæ‰§è¡Œ1æ¬¡ä¸æ‰§è¡Œ 2æ¬¡çš„ç»“æœä¸€è‡´

- ååº”ç”¨å‡½æ•°ï¼ˆpartial applicationï¼‰

    ä¼ é€’ç»™å‡½æ•°ä¸€éƒ¨åˆ†å‚æ•°æ¥è°ƒç”¨å®ƒï¼Œè®©å®ƒè¿”å›ä¸€ä¸ªå‡½æ•°å»å¤„ç†å‰©ä¸‹çš„å‚æ•°

    ```js
    // å¸¦ä¸€ä¸ª â€˜å‡½æ•°å‚æ•°â€™ å’Œ â€˜è¯¥å‡½æ•°çš„éƒ¨åˆ†å‚æ•°â€™
    const partial = (f, ...args) => (...moreArgs) => f(...args, ...moreargs)
    const add3 = (a, b, c) => a + b + c
    const fiveplus = partial(add3, 2, 3)
    fiveplus(3)

    // bind å®ç°æ–¹æ³•
    const addMore = add3.bind(null, 3, 2)

    ```
    - æŸ¯é‡ŒåŒ–
        - æŸ¯é‡ŒåŒ–é€šè¿‡ååº”ç”¨å‡½æ•°æ¥å®ç°ã€‚ä»–æ˜¯æŠŠä¸€ä¸ªå¤šå‚æ•°å‡½æ•°è½¬æ¢ä¸ºä¸€ä¸ªåµŒå¥—ä¸€å…ƒå‡½æ•°çš„è¿‡ç¨‹
        - æŸ¯é‡ŒåŒ–æ˜¯ä¸€ç§â€œé¢„åŠ è½½â€å‡½æ•°çš„æ–¹æ³•ï¼Œè¿™æ˜¯ä¸€ç§å¯¹å‡½æ•°çš„ç¼“å­˜ï¼Œæ˜¯ä¸€ç§é«˜æ•ˆçš„ç¼–ç¨‹æ–¹æ³•
            (é€šè¿‡ä¼ é€’è¾ƒå°‘çš„å‚æ•°ï¼Œå¾—åˆ°ä¸€ä¸ªå·²ç»è®°ä½è¿™ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œè¿™å°±æ˜¯ä¸€ç§å¯¹å‚æ•°çš„ç¼“å­˜)

        ```js
        // æ”¹é€ ç¡¬ç¼–ç å‡½æ•°
        var checkage = age => age > 18
        // æ”¹é€ å
        var checkage = min => (age => age > min)
        var checkage18 = checkage(18)
        checkage18(30)

        // å¦ä¸€ä¸ªæŸ¯é‡ŒåŒ–çš„ä¾‹å­
        function add(a, b){
            return a + b
        }
        add(1, 2)

        // æŸ¯é‡ŒåŒ–
        function addX (a){
            return function(b){
                return a + b
            }
        }
        add(2)(3)
        ```

    - æŸ¯é‡ŒåŒ–å’Œååº”ç”¨å‡½æ•°çš„åŒºåˆ«
        - æŸ¯é‡ŒåŒ–å‡½æ•°çš„å‚æ•°æ˜¯ä»å·¦å‘å³çš„
        - ååº”ç”¨å‡½æ•°ä¸å…³å¿ƒå‚æ•°çš„ä½ç½®ï¼Œååº”ç”¨å‡½æ•°ä¸­ä½¿ç”¨äº†å ä½ç¬¦

            æŸ¯é‡ŒåŒ–çš„å‚æ•°åˆ—è¡¨æ˜¯ä»å·¦å‘å³çš„ï¼Œå¦‚æœä½¿ç”¨ setTimeout è¿™ç§å°±å¾—é¢å¤–çš„å°è£…
        
        ```js
        const setTimeoutWrapper = (time, fn)=> setTimeout(fn, time)
        const delay10 = curry(setTimeoutWrapper)(10)
        delay10(()=> console.log("task one"))
        delay10(()=> console.log("task two"))

        ```
    - setTimeoutWrapper æ˜¾å¾—å¤šä½™ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨åå‡½æ•°ã€‚
    ä½¿ç”¨ curry å’Œ partial æ˜¯ä¸ºäº†è®©å‡½æ•°å‚æ•°æˆ–å‡½æ•°è®¾ç½®å˜å¾—æ›´åŠ ç®€å•å’Œå¼ºå¤§ã€‚
    curryã€partial å®ç°å¯ä»¥å‚è€ƒ lodash

    - å‡½æ•°çš„åæŸ¯é‡ŒåŒ–
        - å‡½æ•°æŸ¯é‡ŒåŒ–æ˜¯å›ºå®šéƒ¨åˆ†å‚æ•°ï¼Œ è¿”å›ä¸€ä¸ªæ¥æ”¶å‰©ä½™å‚æ•°çš„å‡½æ•°ï¼ˆä¹Ÿç§°ä¸ºéƒ¨åˆ†è®¡ç®—å‡½æ•°ï¼‰
        ç›®çš„æ˜¯ä¸ºäº†ç¼©å°é€‚ç”¨èŒƒå›´ï¼Œåˆ›å»ºä¸€ä¸ªé€‚ç”¨æ€§æ›´å¼ºçš„å‡½æ•°
        - åæŸ¯é‡ŒåŒ–ï¼Œå’ŒæŸ¯é‡ŒåŒ–ç›¸åï¼Œæ‰©å¤§é€‚ç”¨èŒƒå›´ï¼Œåˆ›å»ºä¸€ä¸ªåº”ç”¨èŒƒå›´æ›´å¹¿çš„å‡½æ•°ã€‚
        ä½¿æœ¬æ¥åªæœ‰ç‰¹å®šå¯¹è±¡æ‰é€‚ç”¨çš„æ–¹æ³•ï¼Œæ‰©å±•åˆ°æ›´å¤šçš„å¯¹è±¡
    ```js
    Function.prototype.uncurring = function uncurring(){
        var self = this;
        return function(){
            var obj = Array.prototype.shift.call(arguments)
            return self.apply(obj, arguments)
        }
    }
    var push = Array.prototype.push.uncurring()
    var obj = {}
    push(obj, 'first', 'second')
    console.log(obj)

    ```
    
- å‡½æ•°ç»„åˆ

    çº¯å‡½æ•° å’Œ æŠŠå®ƒæŸ¯é‡ŒåŒ–å†™å‡ºçš„æ´‹è‘±ä»£ç   `h(g(f()))` æˆäº†è¿™ä¸ªæ ·å­
    
    ä¸ºäº†è§£å†³å‡½æ•°åµŒå¥—é—®é¢˜ï¼Œå‡ºç°äº†ç»„åˆå‡½æ•°

    - è§£å†³äº†å‡½æ•°åµŒå¥—ä¸å¥½ç†è§£çš„é—®é¢˜ï¼Œè®©å‡½æ•°çœ‹èµ·æ¥æ›´å¥½ç†è§£

    ```js
    const compose = (f, g) => (x => f(g(x)))
    var first = arr => arr[0]
    var reverse = arr => arr.reverse()
    var last = compose(first, reverse)
    last([1,2,3,4,5])

    // å› ä¸ºéƒ½æ˜¯çº¯å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä»»æ„è°ƒæ•´å‡½æ•°çš„ç»„åˆæ–¹å¼
    // ä»–ä»¬æœ€åçš„ç»“æœéƒ½æ˜¯ç­‰æ•ˆçš„
    compose(f, compose(g, h))
    compose(compose(f, g), h)
    compose(f, g, h)

    ```

- æŠ•å½±å‡½æ•° ï¼ˆå¦‚ map ï¼Œç»™ä»–ä»¬èµ·çš„å¦ä¸€ä¸ªåå­—ï¼‰

    æ€»æ˜¯åœ¨åº”ç”¨è½¬æ¢æ“ä½œï¼Œé€šè¿‡ä¼ å…¥é«˜é˜¶å‚æ•°åè¿”å›æ•°ç»„

- å‡½æ•°çš„ç»„åˆå­ï¼ˆç»„åˆå­å°±æ˜¯ç®¡ç†ç¨‹åºçš„æ§åˆ¶æµï¼‰
    
    - compose å‡½æ•°åªèƒ½ç»„åˆä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œåƒ map ã€filter è¿™æ ·å¯ä»¥æ¥æ”¶å¤šä¸ªå‚æ•°çš„å‡½æ•°
    ä¸èƒ½ä½¿ç”¨ compose ç›´æ¥ç»„åˆï¼Œéœ€è¦å€ŸåŠ©åå‡½æ•°åŒ…è£¹åç»§ç»­ç»„åˆ
    - å‡½æ•°ç»„åˆçš„æ•°æ®æµæ˜¯ä»å³è‡³å·¦ï¼Œå› ä¸ºå³è¾¹çš„å‡½æ•°å…ˆæ‰§è¡Œï¼Œå¦‚ `f(g(h))` è¿‡ç¨‹æ˜¯ `h -> g -> f`ï¼›
    æœ‰äººå–œæ¬¢å¦ä¸€ç§æ‰§è¡Œæ–¹å¼ï¼Œä»å·¦è‡³å³ æ‰§è¡Œï¼ˆæˆ‘ä»¬å«ä»–ç®¡é“ï¼Œpipeã€åºåˆ—ï¼‰ï¼Œä»–å’Œ compose åšçš„äº‹æƒ…
    ä¸€æ ·ï¼Œåªä¸è¿‡æ˜¯æ•°æ®æµåŠ¨çš„æ–¹å‘è¢«æ”¹å˜äº†
    - å‘½ä»¤å¼ä»£ç èƒ½å¤Ÿä½¿ç”¨ if-else å’Œ for è¿™æ ·çš„è¿‡ç¨‹æ§åˆ¶ï¼Œå‡½æ•°å¼ä¸èƒ½ã€‚
    æ‰€ä»¥æˆ‘ä»¬éœ€è¦å‡½æ•°ç»„åˆå­ã€‚ç»„åˆå­å¯ä»¥ç»„åˆå…¶ä»–å‡½æ•°ï¼ˆæˆ–å…¶ä»–ç»„åˆå­ï¼‰ï¼Œä½œä¸ºæ§åˆ¶é€»è¾‘å•å…ƒçš„é«˜é˜¶å‡½æ•°ï¼ˆhigh order functionï¼‰ã€‚ç»„åˆå­é€šå¸¸ä¸å£°æ˜ä»»ä½•å˜é‡ï¼Œä¹Ÿä¸åŒ…å«ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œä»–ä»¬æ—¨åœ¨ç®¡ç†å‡½æ•°ç¨‹åºæ‰§è¡Œæµç¨‹ï¼Œ
    å¹¶åœ¨é“¾å¼è°ƒç”¨ä¸­å¯¹ä¸­é—´ç»“æœè¿›è¡Œæ“ä½œã€‚

    å¸¸è§çš„ç»„åˆå­

    ```js
    // è¾…åŠ©ç»„åˆå­
    æ— ä¸º nothing ã€ç…§æ—§ identity ã€é»˜è®¸ defaultTo ã€æ’å®š always

    // å‡½æ•°ç»„åˆå­
    æ”¶ç¼© gather ã€å±•å¼€ spread ã€é¢ å€’ reverse ã€å·¦å partial ã€å³å partialRight
    æŸ¯é‡ŒåŒ– curry ã€å¼ƒç¦» tap ã€äº¤æ›¿ alt ã€è¡¥æ•‘ trycatch ã€åŒæ—¶ seq ã€èšé›† convergeã€
    æ˜ å°„ map ã€åˆ†æ‹£ useWith ã€è§„çº¦ reduce ã€ç»„åˆ compose

    // è°“è¯­ç»„åˆå­
    è¿‡æ»¤ filter ã€ åˆ†ç»„ group ã€æ’åº sort

    // å…¶ä»–
    ç»„åˆå­å˜æ¢ juxt

    ```
    åˆ†å±äºskiï¼ˆæ¥æºäºæ•°å­¦ï¼‰ç»„åˆå­ï¼Œ ç”¨äºæ•°æ®çš„å‰¥ç¦»

- point Free ï¼ˆå®ç°å‡½æ•°ç¼–ç¨‹çš„ç›®çš„ æŠ½è±¡ç»„åˆï¼Œ point free è´Ÿè´£æŠ½è±¡ï¼‰

    - æŠŠå¯¹è±¡è‡ªå¸¦çš„æ–¹æ³•è½¬ä¸ºçº¯å‡½æ•°ï¼Œå…å»å£°æ˜é‚£äº›ä¸éœ€è¦çš„å˜é‡
    - point free å¤„ç†é‚£äº›èƒ½å¤Ÿç”¨äºç»„åˆçš„ åŸç”Ÿæ–¹æ³•ï¼Œé€šè¿‡å’Œå…¶ä»–å‡½æ•°ç»„åˆæˆä¸ºé«˜é˜¶å‡½æ•°ã€‚
    è®©ä»£ç æ›´çµæ´»ã€æ›´å¼ºå£®
    ```js
    // ä¸‹é¢è¿™ä¸ªå‡½æ•°ï¼Œä½¿ç”¨str ä½œä¸ºä¸­é—´å˜é‡ï¼Œä½†æ˜¯è¿™ä¸ªä¸­é—´å˜é‡é™¤äº†è®©ä»£ç å˜é•¿äº†ä¸€ç‚¹ä¹‹å¤–æ˜¯æ¯«æ— æ„ä¹‰çš„
    const f = str => str.toUpperCase().split(' ')
    // point free
    var toUpperCase = word => word.toUpperCase()
    var split = x => str => str.split(x)

    var f = compose(split(' '), toUpperCase)
    f('abc df')
    ```
    
- å‘½ä»¤å¼ä»£ç  å’Œ å£°æ˜å¼ä»£ç 
   - å‘½ä»¤å¼ä»£ç å°±æ˜¯é€šè¿‡ç¼–å†™ä¸€æ¡æ¡æŒ‡ä»¤å»è®©è®¡ç®—æœºæ‰§è¡Œä¸€äº›åŠ¨ä½œï¼Œè¿™å…¶ä¸­æ¶‰åŠå¾ˆå¤šç¹æ‚çš„ç»†èŠ‚ã€‚
   - å£°æ˜å¼ä»£ç é€šè¿‡ å†™è¡¨è¾¾å¼ çš„æ–¹å¼æ¥å£°æ˜æˆ‘ä»¬æƒ³å¹²ä»€ä¹ˆ
   - å‡½æ•°å¼ç¼–ç¨‹ä¸å…³æ³¨æµç¨‹ï¼Œåªå…³æ³¨è¿›å»åå‡ºæ¥ä»€ä¹ˆ
   - ä»¥å‡½æ•°å½¢å¼å¯¹æ•°æ®å»ºæ¨¡ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°å³æ•°æ®ã€‚å£°æ˜å¼çš„æè¿°äº†æ•°æ®è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Œè€Œä¸æ˜¯æ•°æ®æ˜¯å¦‚ä½•å¾—åˆ°çš„

   - å‡½æ•°å¼ç¼–ç¨‹æ˜æ˜¾çš„å¥½å¤„å°±æ˜¯å£°æ˜å¼çš„ä»£ç ï¼Œå¯¹äºæ— å‰¯ä½œç”¨çš„çº¯å‡½æ•°æ¥è¯´ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒå®ƒçš„å†…éƒ¨å®ç°ï¼Œ
   ä¸“æ³¨äºç¼–å†™ä¸šåŠ¡ä»£ç ã€‚ä¼˜åŒ–ä»£ç æ—¶ç›®å…‰åªéœ€è¦é›†ä¸­åœ¨è¿™äº›åšå›ºç¨³å®šçš„å‡½æ•°å†…éƒ¨å³å¯ï¼›
   - ç›¸åï¼Œä¸çº¯çš„ä»£ç çš„å‰¯ä½œç”¨æˆ–è€…ä¾èµ–å¤–éƒ¨ç¯å¢ƒï¼Œä½¿ç”¨ä»–ä»¬çš„æ—¶å€™æ€»æ˜¯éœ€è¦è€ƒè™‘ä¸å¹²å‡€çš„å‰¯ä½œç”¨ã€‚
   åœ¨å¤æ‚çš„ç³»ç»Ÿä¸­ï¼Œè¿™å¯¹äºç¨‹åºå‘˜æ¥è¯´æ˜¯æå¤§çš„è´Ÿæ‹…

- æƒ°æ€§é“¾ã€æƒ°æ€§æ±‚å€¼ã€æƒ°æ€§å‡½æ•°

    - `_.chain(æ•°æ®).map().reverse().value()` æƒ°æ€§é“¾å¯ä»¥æ·»åŠ ä¸€ä¸ªè¾“å…¥å¯¹è±¡çš„çŠ¶æ€ï¼Œä»è€Œèƒ½å¤Ÿå°†è¿™äº›
    Ã—è¾“å…¥è½¬æ¢ä¸ºæ‰€éœ€çš„è¾“å‡ºæ“ä½œÃ—è¿æ¥åœ¨ä¸€èµ·ã€‚ ä¸ç®€å•çš„æ•°ç»„æ“ä½œä¸åŒï¼Œå°½ç®¡ä»–æ˜¯ä¸€ä¸ªå¤æ‚çš„ç¨‹åºï¼Œä½†æ˜¯ä»ç„¶èƒ½
    é¿å…åˆ›å»ºä»»ä½•å˜é‡ï¼Œå¹¶ä¸”æœ‰æ•ˆæ¶ˆé™¤æ‰€æœ‰å¾ªç¯ã€‚è€Œä¸”åœ¨æœ€åè°ƒç”¨ value ä¹‹å‰å¹¶ä¸ä¼šçœŸæ­£æ‰§è¡Œä»»ä½•æ“ä½œã€‚
    è¿™å°±æ˜¯ Ã—Ã—æƒ°æ€§é“¾Ã—Ã—
 
    - å½“è¾“å…¥å¾ˆå¤§ï¼Œä½†æ˜¯åªæœ‰ä¸€ä¸ªå°çš„å­é›†æœ‰æ•ˆæ—¶ï¼Œé¿å…ä¸å¿…è¦çš„å‡½æ•°è°ƒç”¨ï¼Œå°±æ˜¯æ‰€è°“çš„ Ã—Ã— æƒ°æ€§æ±‚å€¼Ã—Ã—

        - æƒ°æ€§æ±‚å€¼çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œå¦‚Ã—ç»„åˆå­Ã—ï¼ˆalt ç±»ä¼¼äº || å…ˆè®¡ç®—fun1 å¦‚æœè¿”å›å€¼æ˜¯falseã€null
        undefined å°±ä¸å†æ‰§è¡Œ fun2ï¼›memorizationï¼› shortcut funsionï¼‰ ä½†æ˜¯ç›®çš„éƒ½æ˜¯ä¸€æ ·çš„
        å³å°½å¯èƒ½çš„æ¨è¿Ÿæ±‚å€¼ï¼Œç›´åˆ°ä¾èµ–çš„è¡¨è¾¾å¼è¢«è°ƒç”¨ã€‚
    - æƒ°æ€§å‡½æ•°ï¼Œå‡å¦‚åŒä¸€ä¸ªå‡½æ•°è¢«å¤§é‡è°ƒç”¨ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°å†…éƒ¨åˆæœ‰è®¸å¤šåˆ¤æ–­æ¥æ£€æµ‹å‡½æ•°ï¼Œè¿™æ ·å¯¹äºä¸€ä¸ªè°ƒç”¨
    ä¼šæµªè´¹æ—¶é—´å’Œæµè§ˆå™¨èµ„æºï¼Œæ‰€ä»¥å½“ç¬¬ä¸€æ¬¡åˆ¤æ–­å®Œæˆåï¼Œç›´æ¥æŠŠè¿™ä¸ªå‡½æ•°æ”¹å†™ï¼Œä¸å†éœ€è¦åˆ¤æ–­ã€‚

    ```js
    // æƒ°æ€§æ±‚å€¼çš„ä¾‹å­
    // alt
    const alt = _.curry( (fun1, fun2, val) => fun1(val) || fun2(val) )
    const showStudent = _.compose(å‡½æ•°ä½“1, alt(xx1, xx2))
    showStudent({})

    // memorize
    // object è¢«è£…è½½åï¼Œå¦‚æœæ²¡æœ‰å†æ¬¡è¿›è¡Œè£…è½½ï¼Œä¸‹æ¬¡ç¼“å­˜é‡Œæ‹¿åˆ°çš„å€¼è¿˜æ˜¯åŸæ¥çš„å€¼ï¼Œ
    // ä¸­é€”values çš„æ”¹å˜ä¸ä¼šè¢«æ‹¿åˆ°
    var object = {a: 1, b:'ww'}
    var values = _.memorize(_.values)
    values(object)
    object.a = 'yideng'
    console.log(values.cache.get(object))

    // _.chain å¯ä»¥æ¨æ–­å¯ä¼˜åŒ–ç‚¹ï¼Œå¦‚åˆå¹¶æ‰§è¡Œæˆ–å­˜å‚¨ä¼˜åŒ–
    // åˆå¹¶å‡½æ•°æ‰§è¡Œï¼Œå¹¶å‹ç¼©è®¡ç®—è¿‡ç¨‹ä¸­ä½¿ç”¨çš„ä¸´æ—¶æ•°æ®ç»“æ„ï¼Œé™ä½å†…å­˜å ç”¨
    const trace = msg => console.log(msg)
    let square = x => x**2
    let isEven = x => x%2 === 0
    square = R.compose(R.tap( ()=> trace("mapæ•°ç»„") ), square )
    isEven = R.compose( T.tap(()=> trace("filteræ•°ç»„")), isEven)
    const numbers = _.range(200);
    const result = _.chain(numbers)
        .map(squire)
        .filter(isEven)
        .take(3)
        .value()

    console.log(result)
    // é¦–å…ˆï¼Œtake(3) åªæ‹…å¿ƒå‰3ä¸ªé€šè¿‡mapå’Œfilter çš„å€¼
    // å…¶å® shortcut fusion æŠ€æœ¯æŠŠmap å’Œ filterèåˆ
    // _.compose(filter(isEven), map(square))
    // compose(filter(p1), filter(p2)) =>filter(x => p1(x) && p2(x))
    // lodash ä¸­å…¶ä»–å¸¦æœ‰ shortcutfusion ä¼˜åŒ–å‡½æ•° _.drop ..
    // _.drop  _.dropRight  _.dropRightWhile  _.dropWhile


    // jquery ä¸­ç»å…¸çš„æƒ°æ€§æ±‚å€¼å‡½æ•°
    function createXHR(){
        var xhr = null;
        if( typeof XMLHttpRequest != 'undefined'){
            xhr = new XMLHttpRequest()
            // é‡å†™ createXHR
            createXHR = function(){
                return XMLHttpRequest()
            }
        }else {
            try {
                xhr = new ActiveXObject("Msxml2.XMLHTTP")
                createXHR = function (){
                    return new ActiveXObject("Msxml2.XMLHTTP")
                }
            }catch (e){
                try {
                    xhr = new ActiveXObject("Microsoft.XMLHTTP")
                    createXHR = function (){
                        return new ActiveXObject("Microsoft.XMLHTTP")
                    }
                }catch (e) {
                    createXHR = function (){
                        return null
                    }
                }
            }
        }
    }
    ```

### æ›´åŠ ä¸“ä¸šçš„æœ¯è¯­

- é«˜é˜¶å‡½æ•°

    > å‡½æ•°å½“å‚æ•°ï¼ŒæŠŠä¼ å…¥çš„å‡½æ•°åšä¸€ä¸ªå°è£…ï¼Œç„¶åè¿”å›è¿™ä¸ªå°è£…å‡½æ•°ï¼Œè¾¾åˆ°æ›´é«˜å±‚åº¦çš„æŠ½è±¡

    - ä»–æ˜¯ä¸€ç­‰å…¬æ°‘
    - å®ƒä»¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°
    - ä»¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºè¿”å›ç»“æœ

    ```js
    // å‘½ä»¤å¼
    var add = function (a, b){
        return a + b
    }

    function math(fn, arr){
        return fn(...arr)
    }
    math(add, [1, 2])

    ```

- å°¾è°ƒç”¨ä¼˜åŒ–

    - å°¾è°ƒç”¨æŒ‡å‡½æ•°å†…éƒ¨çš„æœ€åä¸€ä¸ªåŠ¨ä½œæ˜¯å‡½æ•°è°ƒç”¨ã€‚è¯¥è°ƒç”¨çš„è¿”å›å€¼ç›´æ¥è¿”å›ç»™å‡½æ•°ã€‚
    ï¼ˆæ˜¯æœ€åä¸€æ­¥è°ƒç”¨è‡ªèº«ï¼Œè€Œä¸æ˜¯æœ€åä¸€è¡Œï¼‰
    - å‡½æ•°è°ƒç”¨è‡ªèº«ç§°ä¸ºé€’å½’ã€‚ å¦‚æœå°¾è°ƒç”¨è‡ªèº«ï¼Œå°±æ˜¯å°¾é€’å½’ã€‚é€’å½’éœ€è¦ä¿å­˜å¤§é‡çš„è°ƒç”¨è®°å½•ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿæ ˆæº¢å‡ºã€‚
    å¦‚æœä½¿ç”¨å°¾é€’å½’ä¼˜åŒ–ï¼Œå°†é€’å½’å˜ä¸ºå¾ªç¯ï¼Œé‚£ä¹ˆåªéœ€è¦ä¿å­˜ä¸€ä¸ªè°ƒç”¨è®°å½•ï¼Œè¿™æ ·å°±é˜²æ­¢äº†æº¢æ ˆã€‚
    - æŒ‰é“ç†å°¾é€’å½’è°ƒç”¨çš„è°ƒç”¨æ ˆæ°¸è¿œæ˜¯æ›´æ–°å½“å‰çš„æ ˆå¸§è€Œå·²ï¼Œè¿™æ ·å°±é¿å…äº†æº¢æ ˆçš„å±é™©ï¼Œä½†æ˜¯å¦‚ä»Šæµè§ˆå™¨å¹¶æœªå®Œå…¨æ”¯æŒï¼Œ
    åŸå› æœ‰äºŒï¼š 
        1. åœ¨å¼•æ“æ–¹é¢æ¶ˆé™¤é€’å½’æ˜¯ä¸€ä¸ªéšå¼è¡Œä¸ºï¼Œç¨‹åºå‘˜æ„è¯†ä¸åˆ°ã€‚
        2. å †æ ˆä¿¡æ¯ä¸¢å¤±äº†ï¼Œå¼€å‘è€…éš¾ä»¥è°ƒè¯•
    - æ—¢ç„¶æµè§ˆå™¨ä¸æ”¯æŒï¼Œæˆ‘ä»¬å¯ä»¥å°†é€’å½’å†™æˆ while

    ```js
    // ä¸æ˜¯å°¾é€’å½’ï¼Œæ— æ³•ä¼˜åŒ–æ–æ³¢é‚£å¥‘æ•°åˆ—
    function factoria(n){
        if(n===1) return 1
        return n * factoria(n -1)
    }
    // ä¼ ç»Ÿé€’å½’ä¼šç•™ä¸‹å¤§é‡è°ƒç”¨æ‰§è¡Œæ ˆ
    factoria(3)
    (3 * factoria(2))
    (3 * 2 * factoria(1))
    (3 * 2 * 1)
    (3 * 2 )
    (6)
    // æ™®é€šé€’å½’æ—¶ï¼Œå†…å­˜éœ€è¦è®°å½•è°ƒç”¨çš„å †æ ˆæ‰€å¤„çš„æ·±åº¦å’Œä½ç½®ä¿¡æ¯ï¼Œåœ¨æœ€åº•å±‚è®¡ç®—è¿”å›å€¼ï¼Œå†æ ¹æ®è®°å½•ä¸€å±‚å±‚å‘å¤–è·³ï¼Œ
    // ç›´åˆ°åˆ°è¾¾æœ€å¤–å±‚ï¼Œåœ¨ CPUè®¡ç®—æ—¶ï¼Œå†…å­˜ä¼šå ç”¨è¾ƒå¤šï¼Œå¦‚æœæ·±åº¦è¿‡å¤§å¾ˆå®¹æ˜“æº¢æ ˆ

    // ä¼˜åŒ–
    function factoria(n, total){
        if(n === 1) return 1;
        return factoria(n-1, n*total)
    }
    // ä¼˜åŒ–åçš„æ‰§è¡Œæ ˆ
    factoria(3, 1)
    factoria(2, 3 * 1)
    factoria(1, 3 * 2)
    // 6

    // ä¼˜åŒ–åçš„ä»£ç è®¡ç®—è¿‡ç¨‹æ˜¯çº¿æ€§çš„ï¼Œè°ƒç”¨ä¸€æ¬¡ factoria åï¼Œä¼šè¿›å…¥ä¸‹ä¸€ä¸ªæ ˆï¼Œç›¸å…³çš„æ•°æ®è·Ÿéšè¿›å…¥ï¼Œä¸å†æ”¾åˆ°
    // å †æ ˆä¸Šä¿å­˜ã€‚å½“è®¡ç®—å®Œæœ€åçš„å€¼åç›´æ¥è¿”å›åˆ°æœ€ä¸Šå±‚çš„ factoria(3, 1) è¿™èƒ½æœ‰æ•ˆé˜²æ­¢æº¢æ ˆ
    // åœ¨ ES6 ï¼Œæˆ‘ä»¬å°†è¿æ¥å°¾é€’å½’ä¼˜åŒ–ï¼Œé€šè¿‡å°¾é€’å½’ä¼˜åŒ–ï¼Œ js ä»£ç åœ¨è§£é‡Šæˆæœºå™¨ä»£ç æ—¶ï¼Œå°†ä¼šå‘ while çœ‹é½ï¼Œ
    // ä¹Ÿå°±æ˜¯è¯´åŒæ—¶æ‹¥æœ‰æ•°å­¦è¡¨è¾¾èƒ½åŠ›å’Œ while çš„æ•ˆèƒ½

    // å°¾è°ƒç”¨ä¼˜åŒ–ä¼šå°†å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹åˆä¸ºä¸€å¸§ï¼Œæå¤§å‡å°‘å†…å­˜çš„å ç”¨ï¼Œä½†æ˜¯ v8 ç›®å‰è¿˜ä¸æ”¯æŒï¼Œå› ä¸ºä¸€æ—¦æ‰§è¡Œè®°å½•
    // åˆå¸§ï¼Œæˆ‘ä»¬js çš„è°ƒè¯•å°±ä¼šå˜å¾—å›°éš¾ï¼Œå¾ˆéš¾æ‰¾åˆ°é”™è¯¯å‘ç”Ÿçš„ä½ç½®
    // ç›®å‰ Firefox æ”¯æŒå¼ºåˆ¶ä¼˜åŒ–ï¼Œæ–¹æ³•å¦‚ä¸‹
    1. return continue;
    2. !return
    3. #function()
    
    ```


- é—­åŒ…

    - è™½ç„¶å¤–å±‚çš„ makePowerFn å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œæ ˆä¸Šçš„è°ƒç”¨å¸§è¢«é‡Šæ”¾ï¼Œä½†æ˜¯å †ä¸Šçš„ä½œç”¨åŸŸå¹¶ä¸è¢«é‡Šæ”¾ï¼Œå› æ­¤ power
    ä¾æ—§å¯ä»¥è¢«ä¾æ—§å¯ä»¥è¢« powerFn å‡½æ•°è®¿é—®ï¼Œè¿™æ ·å°±å½¢æˆäº†é—­åŒ…
    ```js
    function makePowerFn(power){
        function powerFn(base){
            return Math.pow(base, power)
        }
        return powerFn
    }
    var square = makePowerFn(2)
    square(3)

    ```
- èŒƒç•´ä¸å®¹å™¨
   1. æˆ‘ä»¬å¯ä»¥æŠŠâ€œèŒƒç•´â€æƒ³è±¡æˆä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢åŒ…å«2æ ·ä¸œè¥¿ã€‚å€¼ï¼ˆvalueï¼‰å’Œ å€¼çš„å˜å½¢å…³ç³»ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°
   2. èŒƒç•´è®ºä½¿ç”¨å‡½æ•°è¡¨è¾¾èŒƒç•´ä¹‹é—´çš„å…³ç³»
   3. ä¼´éšç€èŒƒç•´è®ºçš„å‘å±•ï¼Œå°±å‘å±•å‡ºä¸€æ•´å¥—å‡½æ•°çš„è¿ç®—æ–¹æ³•ã€‚è¿™å¥—æ–¹æ³•èµ·åˆåªæ˜¯ç”¨æ¥æ•°å­¦è¿ç®—ï¼Œåæ¥æœ‰äººæŠŠå®ƒåœ¨è®¡ç®—æœºä¸Š
   å®ç°äº†ï¼Œå°±å˜æˆäº†ä»Šå¤©çš„å‡½æ•°å¼ç¼–ç¨‹
   4. æœ¬è´¨ä¸Šï¼Œå‡½æ•°å¼ç¼–ç¨‹åªæ˜¯èŒƒç•´è®ºçš„è¿ç®—æ–¹æ³•ï¼Œè·Ÿæ•°ç†é€»è¾‘ã€å¾®ç§¯åˆ†ã€è¡Œåˆ—å¼æ˜¯åŒä¸€ç±»ä¸œè¥¿ï¼Œéƒ½æ˜¯æ•°å­¦æ–¹æ³•ã€‚åªæ˜¯
   ç¢°å·§å®ƒèƒ½ç”¨æ¥å†™ç¨‹åºã€‚ä¸ºä»€ä¹ˆå‡½æ•°å¼ç¼–ç¨‹è¦æ±‚å‡½æ•°å¿…é¡»æ˜¯çº¯çš„ï¼Œä¸èƒ½æœ‰å‰¯ä½œç”¨ï¼Ÿå› ä¸ºä»–æ˜¯ä¸€ç§è¿ç®—ï¼ŒåŸå§‹ç›®çš„å°±æ˜¯æ±‚å€¼
   ä¸åšå…¶å®ƒäº‹æƒ…ï¼Œå¦åˆ™å°±æ— æ³•æ»¡è¶³å‡½æ•°è¿ç®—æ³•åˆ™äº†ã€‚
   - å‡½æ•°ä¸ä»…å¯ä»¥ç”¨äºåŒä¸€ä¸ªèŒƒç•´ä¹‹ä¸­å€¼çš„è½¬æ¢ï¼Œè¿˜å¯ä»¥ç”¨äºå°†ä¸€ä¸ªèŒƒç•´è½¬æˆå¦ä¸€ä¸ªèŒƒç•´ã€‚è¿™å°±æ¶‰åŠåˆ°äº†å‡½å­ï¼ˆFunctorï¼‰
   - å‡½å­æ˜¯å‡½æ•°å¼ç¼–ç¨‹é‡Œæœ€é‡è¦çš„æ•°æ®ç±»å‹ï¼Œä¹Ÿæ˜¯æœ€åŸºæœ¬çš„è¿ç®—å•ä½å’ŒåŠŸèƒ½å•ä½ã€‚å®ƒé¦–å…ˆæ˜¯ä¸€ç§èŒƒç•´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ˜¯ä¸€ä¸ªå®¹å™¨
   åŒ…å«äº†å€¼å’Œå˜å½¢å…³ç³»ã€‚æ¯”è¾ƒç‰¹æ®Šçš„æ˜¯ï¼Œå®ƒçš„å˜å½¢å…³ç³»å¯ä»¥ä¾æ¬¡ä½œç”¨äºæ¯ä¸€ä¸ªå€¼ï¼Œå°†å½“å‰å®¹å™¨ä¾¿å½¢æˆå¦ä¸€ä¸ªå®¹å™¨ã€‚

- å®¹å™¨ã€Functorï¼ˆå‡½å­ï¼‰
    - jQuery `$(...)` è¿”å›çš„å¯¹è±¡å¹¶ä¸æ˜¯ä¸€ä¸ªåŸç”Ÿçš„ DOMå¯¹è±¡ï¼Œè€Œæ˜¯ç›¸å¯¹äºåŸç”Ÿå¯¹è±¡çš„ä¸€ç§å°è£…ï¼Œè¿™åœ¨æŸç§æ„ä¹‰ä¸Š
    å°±æ˜¯ä¸€ä¸ª â€™å®¹å™¨â€˜ ï¼Œï¼ˆä½†å®ƒå¹¶ä¸æ˜¯å‡½æ•°å¼ï¼‰
    - Functor ï¼šéµå®ˆä¸€äº›ç‰¹å®šè§„åˆ™çš„å®¹å™¨ç±»å‹ã€‚
    - Functor æ˜¯ä¸€ä¸ªå¯¹äºå‡½æ•°è°ƒç”¨çš„æŠ½è±¡ï¼Œæˆ‘ä»¬èµ‹äºˆå®¹å™¨è‡ªå·±è°ƒç”¨å‡½æ•°çš„èƒ½åŠ›ã€‚æŠŠä¸œè¥¿è£…è¿›ä¸€ä¸ªå®¹å™¨ï¼Œåªç•™ä¸€ä¸ªæ¥å£map
    ç»™å®¹å™¨å¤–çš„å‡½æ•°ï¼Œmap ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬è®©å®¹å™¨è‡ªå·±æ¥è¿è¡Œè¿™ä¸ªå‡½æ•°ï¼Œè¿™æ ·çš„å®¹å™¨å°±å¯ä»¥è‡ªç”±é€‰æ‹©ä½•æ—¶ä½•åœ°è‡ªç”±æ“ä½œè¿™ä¸ª
    å‡½æ•°ï¼Œä»¥è‡³äºæ‹¥æœ‰æƒ°æ€§æ±‚å€¼ã€é”™è¯¯å¤„ç†ã€å¼‚æ­¥è°ƒç”¨ç­‰ç­‰ç‰›æ°çš„ç‰¹æ€§ã€‚

    ```js
    var Container = function(x){
        this.__value = x
    }
    // å‡½æ•°å¼ç¼–ç¨‹è§„å®šå‡½å­æœ‰ä¸€ä¸ª of æ–¹æ³•
    Container.of = x => new Container(x)
    // Container.of('abcd')
    // ä¸€èˆ¬çº¦å®šï¼Œå‡½å­çš„æ ‡è¯†å°±æ˜¯å®¹å™¨å…·æœ‰ä¸€ä¸ªmap æ–¹æ³•ã€‚è¯¥æ–¹æ³•å°†å®¹å™¨é‡Œçš„æ¯ä¸€ä¸ªå€¼æ˜ å°„åˆ°å¦ä¸€ä¸ªå®¹å™¨
    Container.prototype.map = function(f){
        return Container.of(f(this.__value))
    }

    Container.of(3)
        .map(x => x + 1)         // Container(4)
        .map(x => 'Result is' + x)   // Container('Result is 4')

    // map ES6 å†™æ³•
    class Functor {
        constructor(val){
            this.val = val
        }
        map(f){
            return new Functor(f(this.value))
        }
    }
    (new Functor(2)).map(function(two){
        return two + 2
    })
    // Functor(4)

    ```

- pointed å‡½å­
    - å‡½å­æ˜¯ä¸€ä¸ªåªå®ç°äº† map å¥‘çº¦çš„æ¥å£ã€‚pointedå‡½å­æ˜¯ä¸€ä¸ªå‡½å­çš„å­é›†ã€‚
    - ç”Ÿæˆæ–°çš„å‡½å­çš„æ—¶å€™ï¼Œç”¨äº†new å‘½ä»¤ã€‚è¿™ä¸ªå¤ªä¸åƒå‡½æ•°å¼ç¼–ç¨‹äº†ï¼Œå› ä¸º new å‘½ä»¤æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ‡è¯†ã€‚
    å‡½æ•°å¼ç¼–ç¨‹ä¸€èˆ¬çº¦å®šï¼Œå‡½å­æœ‰ä¸€ä¸ª of æ–¹æ³•ï¼Œç”¨æ¥ç”Ÿæˆæ–°çš„å®¹å™¨

    ```js
    Functor.of = function(val){
        return new Functor(val)
    }
    // æ•°ç»„æˆä¸ºä¸€ä¸ª pointed å‡½å­
    Array.of("")

    Functor.of(2).map(function(two){
        return two + 2
    })
    // Functor(4)

    ```
- Maybe å‡½å­
    > Maybe ç”¨äºå¤„ç†é”™è¯¯å’Œå¼‚å¸¸ã€‚å‡½å­æ¥å—å„ç§å‡½æ•°ï¼Œå¤„ç†å®¹å™¨å†…éƒ¨çš„å€¼ã€‚ è¿™é‡Œå°±æœ‰ä¸€ä¸ªé—®é¢˜å®¹å™¨ï¼Œå†…éƒ¨çš„å€¼å¯èƒ½æ˜¯ä¸€ä¸ª
    ç©ºå€¼ï¼ˆå¦‚ nullï¼‰ï¼Œè€Œå¤–éƒ¨å‡½æ•°æœªå¿…æœ‰å¤„ç†ç©ºå€¼çš„æœºåˆ¶ï¼Œå¦‚æœä¼ å…¥ç©ºå€¼ï¼Œå¾ˆå¯èƒ½ä¼šå‡ºé”™

   ```js
    Functor.of(null).map(function (s){
        return s.toUppercase()
    })
    // TypeError

    class Maybe extends Functor {
        map(f){
            return this.val ? Maybe.of(f(this.value)) : Maybe.of(null)
        }
    }
    Maybe.of(null).map(function (s){
        return s.toUppercase()
    })
    // Maybe(null)

   ```

- é”™è¯¯å¤„ç†ã€Eitherã€AP
    - æˆ‘ä»¬çš„å®¹å™¨åšçš„äº‹æƒ…å¤ªå°‘äº†ï¼Œ try/catch/throw å¹¶ä¸æ˜¯ â€œçº¯â€çš„ï¼Œå› ä¸ºå®ƒä»å¤–éƒ¨æ¥ç®¡äº†æˆ‘ä»¬çš„å‡½æ•°ï¼Œ
    å¹¶ä¸”åœ¨è¿™ä¸ªå‡½æ•°å‡ºé”™æ—¶æŠ›å¼ƒäº†å®ƒçš„è¿”å›å€¼ã€‚åˆ†æ”¯
    - Promise æ˜¯å¯ä»¥è°ƒç”¨ catch æ¥é›†ä¸­å¤„ç†é”™è¯¯çš„
    - å®é™…ä¸Šï¼Œ Either å¹¶ä¸æ˜¯åªæ˜¯ç”¨æ¥åšé”™è¯¯å¤„ç†çš„ï¼Œå®ƒè¡¨ç¤ºäº†é€»è¾‘æˆ–ï¼ŒèŒƒç•´å­¦é‡Œçš„ coproduc
    - æ¡ä»¶è¿ç®— `if ... else` æ˜¯æœ€å¸¸è§çš„è¿ç®—ä¹‹ä¸€ï¼Œ å‡½æ•°å¼ç¼–ç¨‹é‡Œï¼Œä½¿ç”¨ Either å‡½å­è¡¨è¾¾ã€‚
    - Either å‡½å­å†…éƒ¨æœ‰2ä¸ªå€¼ï¼š å·¦å€¼ï¼ˆleftï¼‰ã€å³å€¼ï¼ˆrightï¼‰ã€‚å³å€¼æ˜¯æ­£å¸¸æƒ…å†µä¸‹ä½¿ç”¨çš„å€¼ï¼Œå·¦å€¼æ˜¯
    å½“å³å€¼ä¸å­˜åœ¨æ—¶ä½¿ç”¨çš„å€¼

    ```js
    class Either extends Functor {
        constructor(left, right){
            this.left = left
            this.right = right
        }
        map(f){
            return this.right ? 
                Either.of(this.left, f(this.right)) :
                Either.of(f(this.left), f(this.right))
        }
    }
    Either.of = function(left, right){
        return new Either(left, right)
    }

    // eg.
    var addOne = x => x + 1
    Either.of(5, 6).map(addOne)
    // Either(5, 7)

    Either.of(1, null).map(addOne)
    // Either(2. null)

    Either.of({addr: 'xxx'}, currentUser.add)
            .map(updateField)


    ```
    - left å’Œ right å”¯ä¸€çš„åŒºåˆ«å°±åœ¨äº map æ–¹æ³•çš„å®ç°ï¼Œ Right.map å°±å¾ˆä¸åŒäº†ï¼Œå®ƒä¸ä¼šå¯¹å®¹å™¨
    åšä»»ä½•äº‹æƒ…ï¼Œåªæ˜¯ç®€å•åœ°æŠŠè¿™ä¸ªå®¹å™¨æ‹¿è¿›æ¥åˆæ‰”å‡ºå»ã€‚è¿™ä¸ªç‰¹æ€§æ„å‘³ç€ left å¯ä»¥ç”¨æ¥ä¼ é€’ä¸€ä¸ªé”™è¯¯çš„æ¶ˆæ¯

    ```js
    var Left = function (k){
        this.value = k
    }
    var Right = function (k){
        this.value = k
    }
    Left.of = function (f){
        return new Left(x)
    }
    Right.of = function (f){
        return new Right(x)
    }
    // è¿™é‡Œä¸åŒ
    Left.prototype.map = function (){
        return this
    }
    Right.prototype.map = function (f){
        return Right.of(f(this.value))
    }

    // é”™è¯¯å¤„ç†
    var getAge = user => user.age ? 
            Right.of(user.age) :
            Left.of('Error')
    getAge({name: 'yd', age: 4}).map(age => 'Age is' + age)
    // Right('Age is 4')

    getAge({name: 'cc'}).map(age => 'age is' + age)
    // Left('Error')

    // left å¯ä»¥è®©è°ƒç”¨é“¾ä¸­ä»»æ„ä¸€ç¯çš„é”™è¯¯ç«‹åˆ»è¿”å›åˆ°è°ƒç”¨é“¾çš„å°¾éƒ¨ï¼Œ
    // è¿™ç»™æˆ‘ä»¬é”™è¯¯å¤„ç†å¸¦æ¥äº†å¾ˆå¤§çš„æ–¹ä¾¿ï¼Œå†ä¹Ÿä¸ç”¨ä¸€å±‚æœ‰ä¸€å±‚çš„ try .. catch

    ```
- AP 
    - å‡½å­é‡Œé¢åŒ…å«çš„å€¼ï¼Œå®Œå…¨å¯ä»¥æ˜¯å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥æƒ³è±¡è¿™æ ·ä¸€ç§æƒ…å†µï¼Œä¸€ä¸ªå‡½å­é‡Œçš„å€¼æ˜¯æ•°å€¼ï¼Œå¦ä¸€ä¸ª
    å‡½å­é‡Œé¢çš„å€¼æ˜¯å‡½æ•°ã€‚

    ```js
    class AP extends Functor {
        map(F){
            return AP.of(this.val(F.val)) 
        }
    }
    AP.of(addTwo).map(Functor.of(2))

    ```

- IO
    - çœŸæ­£çš„ç¨‹åºæ€»æ˜¯è¦å»æ¥è§¦ è‚®è„çš„ä¸–ç•Œ
    ```js
    function readLocalStorage(){
        return window.localStorage
    }

    ```
    - IO è·Ÿå‰é¢é‚£å‡ ä¸ª Functor ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œå®ƒçš„ __value æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å®ƒæŠŠä¸çº¯çš„æ“ä½œï¼ˆæ¯”å¦‚
    IOã€ç½‘ç»œè¯·æ±‚ã€DOMï¼‰åŒ…è£¹åˆ°ä¸€ä¸ªå‡½æ•°å†…ï¼Œä»è€Œå»¶è¿Ÿè¿™ä¸ªæ“ä½œçš„æ‰§è¡Œã€‚æ‰€ä»¥æˆ‘ä»¬è®¤ä¸ºï¼Œ IO åŒ…å«çš„æ˜¯è¢«
    åŒ…è£¹çš„æ“ä½œçš„è¿”å›å€¼ã€‚
    - IO å…¶å®ä¹Ÿæ˜¯æƒ°æ€§æ±‚å€¼

    ```js
    import _ from 'lodash'
    var compose = _.flowRight

    var IO = function (f){
        this.__value = f
    }
    IO.of = x => new IO(_=>x)

    IO.prototype.map = function(f){
        return new IO(compose(f, this.__value))
    }

    // es6 å†™æ³•
    class IO extends Functor {
        constructor(f){
            this.__value = f
        }
        map(f){
            return IO.of(compose(f, this.__value))
        }
    }

    // IO ç¤ºä¾‹
    var fs = require('fs')
    var readFile = function(filename){
        return new IO(function(){
            return fs.readFileSync(filename, 'utf-8')
        })
    }

    readFile('/1.txt')
        .flatMap(tail)
        .flatMap(print)
    // ç­‰åŒäº
    readFile('./1.txt')
        .chain(tail)
        .chain(print)

    ```

- Monad

    - Monad å°±æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œè¡¨ç¤ºä¸€ä¸ªè¿ç®—è¿‡ç¨‹ï¼Œé€šè¿‡å°†å‡½æ•°æ‹†è§£æˆäº’ç›¸è¿æ¥çš„å¤šä¸ªæ­¥éª¤ã€‚ä½ åªè¦æä¾›
    ä¸‹ä¸€æ­¥è¿ç®—æ‰€éœ€çš„å‡½æ•°ï¼Œæ•´ä¸ªè¿ç®—å°±ç»§ç»­è¿è¡Œä¸‹å»
    - promise å°±æ˜¯ä¸€ç§ Monad
    - Monad è®©æˆ‘ä»¬é¿å¼€äº†åµŒå¥—åœ°ç‹±ï¼Œå¯ä»¥è½»æ¾çš„è¿›è¡Œæ·±åº¦åµŒå¥—çš„å‡½æ•°å¼ç¼–ç¨‹ï¼Œæ¯”å¦‚ IO å’Œå…¶å®ƒå¼‚æ­¥ä»»åŠ¡
    
    ```js
    Maybe.of(
        Maybe.of(
            Maybe.of({name: 'yd', number: 8900})
        )
    )

    class Monad extends Functor {
        join(){
            return this.val
        }
        flatMap(f){
            return this.map(f).join()
        }
    }
    // Monad çš„ä½œç”¨æ˜¯è¿”å›ä¸€ä¸ªå•å±‚çš„å‡½å­ã€‚ä»–æœ‰ä¸ªflatMap æ–¹æ³•ï¼Œä¸map æ–¹æ³•ç›¸åŒï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯
    // å¦‚æœç”Ÿæˆäº†ä¸€ä¸ªåµŒå¥—å‡½å­ï¼Œä»–ä¼šå–å‡ºåè€…å†…éƒ¨çš„å€¼ï¼Œä¿è¯è¿”å›çš„æ°¸è¿œæ˜¯ä¸€ä¸ªå•å±‚çš„å®¹å™¨ï¼Œä¸ä¼šå‡ºç°åµŒå¥—
    // çš„æƒ…å†µã€‚
    // å¦‚æœå‡½æ•° f è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½å­ï¼Œé‚£ä¹ˆ this.map(f) å°±ä¼šç”Ÿæˆä¸€ä¸ªåµŒå¥—çš„å‡½å­ã€‚æ‰€ä»¥ï¼Œ join æ–¹æ³•
    // ä¿è¯äº† flatMap æ–¹æ³•æ€»æ˜¯è¿”å›ä¸€ä¸ªå•å±‚çš„å‡½å­ã€‚è¿™æ„å‘³ç€åµŒå¥—çš„å‡½å­ä¼šè¢«é“ºå¹³ï¼ˆflattenï¼‰

    // Monad åº”ç”¨
    var fs = require('fs')
    var _ = require('lodash')
    // åŸºç¡€å‡½å­
    class Functor{
        constructor (val){
            this.val = val
        }
        map (f){
            return new Functor(f(this.val))
        }
    }
    // Monad å‡½å­
    class Monad extends Functor {
        join(){
            return this.val
        }
        flatMap (f){
            // 1. f == æ¥å—ä¸€ä¸ªå‡½æ•°è¿”å›çš„æ˜¯ IO å‡½å­
            // 2. this.val ç­‰äºä¸Šä¸€æ­¥çš„è„æ“ä½œ
            // 3. this.map(f) compose(f, this.val) å‡½æ•°ç»„åˆ éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ
            // 4. è¿”å›è¿™ä¸ªç»„åˆå‡½æ•°å¹¶æ‰§è¡Œ
            return this.map(f).join()
        }
    }
    var compose = _.flowRight;

    // IO ç”¨æ¥åŒ…è£¹è„æ“ä½œ
    class IO extends Monad {
        // val æ˜¯æœ€åˆçš„è„æ“ä½œ
        static of (val){
            return new IO(val)
        }
        map(f){
            return IO.of(compose(f, this.val))
        }
    }
    var readFile = function (filename){
        return IO.of(function(){
            return fs.readFileSync(filename, 'utf-8')
        })
    }
    var print = function (x){
        console.log("ğŸŠ")
        return IO.of(function(){
            console.log("ğŸ")
            return x + 'å‡½æ•°å¼'
        })
    }
    var tail = function (x){
        console.log(x)
        return IO.of(function(){
            return x + "[äº¬åŸä¸€ç¯]"
        })
    }
    const result = readFile('./user.txt')
        // flatMap ç»§ç»­è‚®è„æ“ä½œçš„é“¾å¼è°ƒç”¨
        .flatMap(tail)

    console.log( result().val())

    ```